var L=Object.defineProperty;var w=(e,t,r)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var x=(e,t,r)=>w(e,typeof t!="symbol"?t+"":t,r);import{c as R,r as v,j as u,x as k,u as I,a as D,L as U,p as q,b as y,N as J,I as N,m as b,l as z,K as B,E as F,o as V,d as W,h as $,e as G,f as H,g as Q,i as X,k as Y,R as Z,C as ee,t as te}from"./vendor-DUP6PDS8.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();function ne(){const[e,t]=v.useState(null);return{suggestion:e,setSuggestion:t}}const m=R(ne);function re(e){const{as:t,className:r}=e,{suggestion:i}=m.usePicker(["suggestion"]);return console.log(i,"suggestion"),u.jsx(t,{spellCheck:"false",className:r,children:i})}class g extends k{constructor(r,i){super(i);x(this,"__uuid");this.__uuid=r}static clone(r){return new g(r.__uuid,r.__key)}static getType(){return"suggestion"}static importJSON(r){return M(r.__uuid)}exportJSON(){return{...super.exportJSON(),type:"suggestion",__uuid:this.__uuid,version:1}}createDOM(){return document.createElement("span")}updateDOM(){return!1}decorate(){return u.jsx(re,{as:"span",className:"text-gray-400"})}}function M(e){return new g(e)}function se(e=4,t=8){const r=Math.floor(Math.random()*(t-e+1))+e,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return Array.from({length:r},()=>i.charAt(Math.floor(Math.random()*i.length))).join("")}function oe(e){return Promise.resolve({completion:se(),text:e})}function ie(e){return oe(e)}function S(e,t){const r=t==null?void 0:t._nodeMap.get(e);return r===void 0?null:r}function ue(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}const j=ue();function C(e){if(!b(e)||!e.isCollapsed())return[!1,""];const t=e.getNodes()[0],r=e.anchor;if(!z(t)||!t.isSimpleText()||!B(r))return[!1,""];const i=[],n=t.getTextContent();let s=t.getTextContentSize(),a;for(;s--&&s>=0&&(a=n[s])!==" ";)i.push(a);return i.length===0?[!1,""]:[!0,i.reverse().join("")]}function ae(){const[e]=I(),{setSuggestion:t}=m.usePicker(["setSuggestion"]),{runAsync:r,cancel:i}=D(ie,{manual:!0,debounceWait:200});return v.useEffect(()=>{let n=null,s=null,a=null;function l(){const o=n!==null?S(n,e._editorState):null;o!==null&&o.isAttached()&&(o.remove(),n=null),i(),s=null,a=null,t(null)}function O(o){o!==null&&e.update(()=>{const c=N(),[d,f]=C(c);if(!d||f!==s||!b(c))return;const K=c.clone(),h=M(j);n=h.getKey(),c.insertNodes([h]),F(K),a=o,t(o)},{tag:"history-merge"})}function A(o){const c=o.getKey();o.__uuid===j&&c!==n&&l()}function E(){e.update(()=>{const o=N(),[c,d]=C(o);if(!c){l();return}d!==s&&(l(),r(d).then(({completion:f})=>{O(f)}),s=d)})}function P(){if(a===null||n===null)return!1;const o=S(n,e._editorState);if(o===null)return!1;const c=V(a);return o.replace(c),c.selectNext(),l(),!0}function p(o){return P()?(o.preventDefault(),!0):!1}function T(){e.update(()=>{l()})}return U(e.registerNodeTransform(g,A),e.registerUpdateListener(E),e.registerCommand(J,p,y),e.registerCommand(q,p,y),T)},[e,t]),null}const _="Type...",ce={namespace:"Smart Compose",onError:e=>{console.error(e)},editable:!0,theme:{},nodes:[g]};function le(){return u.jsxs("div",{className:"w-screen h-screen flex justify-center items-center flex-col gap-4",children:[u.jsx("h1",{className:"font-bold text-3xl",children:"Smart Compose"}),u.jsx("div",{className:"relative w-[70%]",children:u.jsxs(W,{initialConfig:ce,children:[u.jsx($,{contentEditable:u.jsx(G,{"aria-placeholder":_,placeholder:u.jsx("div",{className:"text-gray-400 absolute truncate top-4 left-4 inline-block pointer-events-none",children:_}),className:"relative bg-white p-4 rounded text-black"}),ErrorBoundary:H}),u.jsx(Q,{}),u.jsx(X,{}),u.jsx(ae,{})]})})]})}Y.createRoot(document.querySelector("#root")).render(u.jsx(Z.StrictMode,{children:u.jsx(ee,{theme:{cssVar:!0,algorithm:[te.darkAlgorithm]},children:u.jsx(m.Provider,{children:u.jsx(le,{})})})}));
